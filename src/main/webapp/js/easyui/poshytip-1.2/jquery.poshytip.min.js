(function(F){var E=[],A=/^url\(["']?([^"'\)]*)["']?\);?$/i,D=/\.png$/i,B=!!window.createPopup&&document.documentElement.currentStyle.minWidth=="undefined";function C(){F.each(E,function(){this.refresh(true)})}F(window).resize(C);F.Poshytip=function(G,H){this.$elm=F(G);this.opts=F.extend({},F.fn.poshytip.defaults,H);this.$tip=F(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body);this.$arrow=this.$tip.find("div.tip-arrow");this.$inner=this.$tip.find("div.tip-inner");this.disabled=false;this.content=null;this.init()};F.Poshytip.prototype={init:function(){E.push(this);var G=this.$elm.attr("title");this.$elm.data("title.poshytip",G!==undefined?G:null).data("poshytip",this);if(this.opts.showOn!="none"){this.$elm.bind({"mouseenter.poshytip":F.proxy(this.mouseenter,this),"mouseleave.poshytip":F.proxy(this.mouseleave,this)});switch(this.opts.showOn){case"hover":if(this.opts.alignTo=="cursor"){this.$elm.bind("mousemove.poshytip",F.proxy(this.mousemove,this))}if(this.opts.allowTipHover){this.$tip.hover(F.proxy(this.clearTimeouts,this),F.proxy(this.mouseleave,this))}break;case"focus":this.$elm.bind({"focus.poshytip":F.proxy(this.showDelayed,this),"blur.poshytip":F.proxy(this.hideDelayed,this)});break}}},mouseenter:function(G){if(this.disabled){return true}this.$elm.attr("title","");if(this.opts.showOn=="focus"){return true}this.showDelayed()},mouseleave:function(G){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===G.relatedTarget||jQuery.contains(this.$tip[0],G.relatedTarget))){return true}if(!this.$tip.data("active")){var H=this.$elm.data("title.poshytip");if(H!==null){this.$elm.attr("title",H)}}if(this.opts.showOn=="focus"){return true}this.hideDelayed()},mousemove:function(G){if(this.disabled){return true}this.eventX=G.pageX;this.eventY=G.pageY;if(this.opts.followCursor&&this.$tip.data("active")){this.calcPos();this.$tip.css({left:this.pos.l,top:this.pos.t});if(this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow}}},show:function(){if(this.disabled||this.$tip.data("active")){return}if(this.opts.gridId){var I=F("#"+this.opts.gridId);var K="1";try{var N=I.treegrid("getRoots");if(N&&N.length>0){K="2"}}catch(G){}if(K=="1"){var J=I.datagrid("getSelected");if(J){var H=I.datagrid("getRowIndex",J);var L=I.datagrid("getEditors",H);if(L&&L.length>0){return}}}if(K=="2"){var J=I.treegrid("getSelected");if(J){var M=J.id;var L=I.treegrid("getEditors",M);if(L&&L.length>0){return}}}}this.reset();this.update();if(!this.content){return}this.display();if(this.opts.timeOnScreen){this.hideDelayed(this.opts.timeOnScreen)}},showDelayed:function(G){this.clearTimeouts();this.showTimeout=setTimeout(F.proxy(this.show,this),typeof G=="number"?G:this.opts.showTimeout)},hide:function(){if(this.disabled||!this.$tip.data("active")){return}this.display(true)},hideDelayed:function(G){this.clearTimeouts();this.hideTimeout=setTimeout(F.proxy(this.hide,this),typeof G=="number"?G:this.opts.hideTimeout)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",false);this.$inner.find("*").poshytip("hide");if(this.opts.fade){this.$tip.css("opacity",this.opacity)}this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left";this.asyncAnimating=false},update:function(J,H){if(this.disabled){return}var K=J!==undefined;if(K){if(!H){this.opts.content=J}if(!this.$tip.data("active")){return}}else{J=this.opts.content}var I=this,G=typeof J=="function"?J.call(this.$elm[0],function(L){I.update(L)}):J=="[title]"?this.$elm.data("title.poshytip"):J;if(this.content!==G){this.$inner.empty().append(G);this.content=G}this.refresh(K)},refresh:function(G){if(this.disabled){return}if(G){if(!this.$tip.data("active")){return}var H={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body);if(this.opacity===undefined){this.opacity=this.$tip.css("opacity")}var L=this.$tip.css("background-image").match(A),P=this.$arrow.css("background-image").match(A);if(L){var J=D.test(L[1]);if(B&&J){this.$tip.css("background-image","none");this.$inner.css({margin:0,border:0,padding:0});L=J=false}else{this.$tip.prepend('<table class="tip-table" border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+L[1]+'")').end().find("td").eq(3).append(this.$inner)}if(J&&!F.support.opacity){this.opts.fade=false}}if(P&&!F.support.opacity){if(B&&D.test(P[1])){P=false;this.$arrow.css("background-image","none")}this.opts.fade=false}var O=this.$tip.find("> table.tip-table");if(B){this.$tip[0].style.width="";O.width("auto").find("td").eq(3).width("auto");var K=this.$tip.width(),I=parseInt(this.$tip.css("min-width")),M=parseInt(this.$tip.css("max-width"));if(!isNaN(I)&&K<I){K=I}else{if(!isNaN(M)&&K>M){K=M}}this.$tip.add(O).width(K).eq(0).find("td").eq(3).width("100%")}else{if(O[0]){O.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%")}}this.tipOuterW=this.$tip.outerWidth();this.tipOuterH=this.$tip.outerHeight();this.calcPos();if(P&&this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow;this.$arrow.css("visibility","inherit")}if(G&&this.opts.refreshAniDuration){this.asyncAnimating=true;var N=this;this.$tip.css(H).animate({left:this.pos.l,top:this.pos.t},this.opts.refreshAniDuration,function(){N.asyncAnimating=false})}else{this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(J){var L=this.$tip.data("active");if(L&&!J||!L&&J){return}this.$tip.stop();if((this.opts.slide&&this.pos.arrow||this.opts.fade)&&(J&&this.opts.hideAniDuration||!J&&this.opts.showAniDuration)){var G={},N={};if(this.opts.slide&&this.pos.arrow){var I,M;if(this.pos.arrow=="bottom"||this.pos.arrow=="top"){I="top";M="bottom"}else{I="left";M="right"}var K=parseInt(this.$tip.css(I));G[I]=K+(J?0:(this.pos.arrow==M?-this.opts.slideOffset:this.opts.slideOffset));N[I]=K+(J?(this.pos.arrow==M?this.opts.slideOffset:-this.opts.slideOffset):0)+"px"}if(this.opts.fade){G.opacity=J?this.$tip.css("opacity"):0;N.opacity=J?0:this.opacity}this.$tip.css(G).animate(N,this.opts[J?"hideAniDuration":"showAniDuration"])}J?this.$tip.queue(F.proxy(this.reset,this)):this.$tip.css("visibility","inherit");if(L){var H=this.$elm.data("title.poshytip");if(H!==null){this.$elm.attr("title",H)}}this.$tip.data("active",!L)},disable:function(){this.reset();this.disabled=true},enable:function(){this.disabled=false},destroy:function(){this.reset();this.$tip.remove();delete this.$tip;this.content=null;this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip");E.splice(F.inArray(this,E),1)},clearTimeouts:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}},calcPos:function(){var M={l:0,t:0,arrow:""},N=F(window),O={l:N.scrollLeft(),t:N.scrollTop(),w:N.width(),h:N.height()},K,H,G,P,I,L;if(this.opts.alignTo=="cursor"){K=H=G=this.eventX;P=I=L=this.eventY}else{var Q=this.$elm.offset(),J={l:Q.left,t:Q.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};K=J.l+(this.opts.alignX!="inner-right"?0:J.w);H=K+Math.floor(J.w/2);G=K+(this.opts.alignX!="inner-left"?J.w:0);P=J.t+(this.opts.alignY!="inner-bottom"?0:J.h);I=P+Math.floor(J.h/2);L=P+(this.opts.alignY!="inner-top"?J.h:0)}switch(this.opts.alignX){case"right":case"inner-left":M.l=G+this.opts.offsetX;if(this.opts.keepInViewport&&M.l+this.tipOuterW>O.l+O.w){M.l=O.l+O.w-this.tipOuterW}if(this.opts.alignX=="right"||this.opts.alignY=="center"){M.arrow="left"}break;case"center":M.l=H-Math.floor(this.tipOuterW/2);if(this.opts.keepInViewport){if(M.l+this.tipOuterW>O.l+O.w){M.l=O.l+O.w-this.tipOuterW}else{if(M.l<O.l){M.l=O.l}}}break;default:M.l=K-this.tipOuterW-this.opts.offsetX;if(this.opts.keepInViewport&&M.l<O.l){M.l=O.l}if(this.opts.alignX=="left"||this.opts.alignY=="center"){M.arrow="right"}}switch(this.opts.alignY){case"bottom":case"inner-top":M.t=L+this.opts.offsetY;if(!M.arrow||this.opts.alignTo=="cursor"){M.arrow="top"}if(this.opts.keepInViewport&&M.t+this.tipOuterH>O.t+O.h){M.t=P-this.tipOuterH-this.opts.offsetY;if(M.arrow=="top"){M.arrow="bottom"}}break;case"center":M.t=I-Math.floor(this.tipOuterH/2);if(this.opts.keepInViewport){if(M.t+this.tipOuterH>O.t+O.h){M.t=O.t+O.h-this.tipOuterH}else{if(M.t<O.t){M.t=O.t}}}break;default:M.t=P-this.tipOuterH-this.opts.offsetY;if(!M.arrow||this.opts.alignTo=="cursor"){M.arrow="bottom"}if(this.opts.keepInViewport&&M.t<O.t){M.t=L+this.opts.offsetY;if(M.arrow=="bottom"){M.arrow="top"}}}this.pos=M}};F.fn.poshytip=function(J){if(typeof J=="string"){var L=arguments,K=J;Array.prototype.shift.call(L);if(K=="destroy"){this.die?this.die("mouseenter.poshytip").die("focus.poshytip"):F(document).undelegate(this.selector,"mouseenter.poshytip").undelegate(this.selector,"focus.poshytip")}return this.each(function(){var M=F(this).data("poshytip");if(M&&M[K]){M[K].apply(M,L)}})}var H=F.extend({},F.fn.poshytip.defaults,J);if(!F("#poshytip-css-"+H.className)[0]){F(['<style id="poshytip-css-',H.className,'" type="text/css">',"div.",H.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",H.className," table.tip-table, div.",H.className," table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}","div.",H.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",H.bgImageFrameSize,"px;width:",H.bgImageFrameSize,"px;overflow:hidden;}","div.",H.className," td.tip-right{background-position:100% 0;}","div.",H.className," td.tip-bottom{background-position:100% 100%;}","div.",H.className," td.tip-left{background-position:0 100%;}","div.",H.className," div.tip-inner{background-position:-",H.bgImageFrameSize,"px -",H.bgImageFrameSize,"px;}","div.",H.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head")}if(H.liveEvents&&H.showOn!="none"){var I,G=F.extend({},H,{liveEvents:false});switch(H.showOn){case"hover":I=function(){var M=F(this);if(!M.data("poshytip")){M.poshytip(G).poshytip("mouseenter")}};this.live?this.live("mouseenter.poshytip",I):F(document).delegate(this.selector,"mouseenter.poshytip",I);break;case"focus":I=function(){var M=F(this);if(!M.data("poshytip")){M.poshytip(G).poshytip("showDelayed")}};this.live?this.live("focus.poshytip",I):F(document).delegate(this.selector,"focus.poshytip",I);break}return this}return this.each(function(){new F.Poshytip(this,H)})};F.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:false,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,keepInViewport:true,allowTipHover:true,followCursor:false,fade:true,slide:true,slideOffset:8,showAniDuration:300,hideAniDuration:300,refreshAniDuration:200}})(jQuery);